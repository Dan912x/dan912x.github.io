<html>
<head>
</head>


<body>

  <button id="get-access" style="font-family: Arial, sans-serif; font-size: 20px">Get access to camera</button>
  <video autoplay></video>

  <script>
    document.querySelector('#get-access').addEventListener('click', async function init(e) {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({
          audio: false,
          video: true
        })
        const videoTracks = stream.getVideoTracks()
        const track = videoTracks[0]
        // alert(`Getting video from: ${track.label}`)
        document.querySelector('video').srcObject = stream
        document.querySelector('#get-access').setAttribute('hidden', true)
        //The video stream is stopped by track.stop() after 5 second of playback.
        setTimeout(() => { track.stop() }, 5 * 1000)
      } catch (error) {
        alert(`${error.name}`)
        console.error(error)
      }
  })
  navigator.mediaDevices.getUserMedia({
    video: true
  })
  </script>
</body>
</html>
